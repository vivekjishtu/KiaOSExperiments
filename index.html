<html lang="en">
  <head>
    <meta charset="utf-8">
    <title>KiaOS Experiments</title>
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <style>
	   section button {
		width: 100%;   
		font-size: 24pt;
	    }
	    
	    section {
		margin-bottom: 10px;    
	    }
    </style>
</head>
  <body>
     <main>
      <section>
        <button id="launchHotSpot">Hotspot</button>
      </section>
      <section>
        <button id="launchDeveloperMode">Developer Mode</button>
      </section>
      <section>
        <button id="launchTest">Testing</button>
      </section>
    </main>
    <script>
      function xProcess(cmd) {
        try {
          alert(JSON.stringify(Components))
          var file = Components.classes['@mozilla.org/file/local;1'].createInstance(Components.interfaces.nsILocalFile)
          var process = Components.classes['@mozilla.org/process/util;1'].createInstance(Components.interfaces.nsIProcess)
          var args = ['-c', cmd]
          file.initWithPath('/system/bin/sh')
          process.init(file)
          process.runAsync(args, args.length, {})
        } catch (e) {
          alert('Error: ' + e)
        }
      }
      
      document.getElementById('launchTest').addEventListener('click', function() {
         xProcess("ls");
      }, false);
	    
      document.getElementById('launchDeveloperMode').addEventListener('click', function() {
         if(window.MozActivity) {
            var act = new MozActivity({
              name: "configure",
              data: {
                target: "device",
                section: "developer"
              }
            });
            
            console.log(act);
          } else {
           window.alert('Open the page from the device.')
         }
      }, false);
      
      document.getElementById('launchHotSpot').addEventListener('click', function(e)      {
        if(window.MozActivity) {
          var act = new MozActivity({
            name: "configure",
            data: {
              target: "device",
              section: "hotspot"
            }
          });
          console.log(act);
        } else {
          window.alert('Open the page from the device.')
        }
      }, false)
    </script>

</body>
</html>
